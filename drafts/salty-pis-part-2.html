<!DOCTYPE html>
<html lang="en">
<head>
          <title>kail.io</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="/theme/css/pygment.css"/>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"/>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/journal/bootstrap.min.css"/>
        <link rel="stylesheet" href="/theme/css/styles.css"/>
        <link rel="stylesheet" href="https://cdn.rawgit.com/jpswalsh/academicons/master/css/academicons.min.css">


    <meta name="tags" content="raspberry pi" />
    <meta name="tags" content="salt" />

</head>
<body id="index" class="home">
    <nav class="navbar navbar-default">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <!--<a class="navbar-brand" href="#">Brand</a>-->
                <a class="navbar-brand" href="/">kail.io <strong></strong></a>
                <!--<a class="navbar-brand" href="/">kail.io <strong></strong></a>-->
            </div>
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">

                    <li><a href="/pages/about-the-author.html">About The Author</a></li>
                    <li><a href="/pages/contact-me.html">Contact Me</a></li>
                    <!--<li class="active"><a href="#">Link <span class="sr-only">(current)</span></a></li>-->
                    <!--<li><a href="#">Link</a></li>-->
                </ul>
                <ul class="nav navbar-right navbar-nav">
                    <li>
                        <p class="navbar-text" style="margin-top: 10px; margin-bottom: 0px;">
                            <a href="https://github.com/akail"><i class="fa fa-github fa-2x"></i></a>
                            <a href="https://gitlab.com/akail"><i class="fa fa-gitlab fa-2x"></i></a>
                            <a href="https://twitter.com/doubleakail"><i class="fa fa-twitter fa-2x"></i></a>
                            <a href="https://plus.google.com/109540964882796106626"><i class="fa fa-google-plus fa-2x"></i></a>
                            <a href="https://bitbucket.org/akail"><i class="fa fa-bitbucket fa-2x"></i></a>
                            <a href="https://orcid.org/0000-0002-2243-2600"><i class="ai ai-orcid ai-2x"></i></a>
                        </p>
                    </li>
                </ul>
            </div><!-- /.navbar-collapse -->
        </div>
    </nav>
    <div class="container">
        <div class="col-md-9">
<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="/drafts/salty-pis-part-2.html" rel="bookmark"
         title="Permalink to Salty Pi's Part 2">Salty Pi's Part 2</a></h2>
 
  </header>
  <footer class="post-info">
    <time class="published" datetime="2018-06-22T00:00:00-04:00">
      Fri 22 June 2018
    </time>
    <address class="vcard author">
      By           <a class="url fn" href="/author/andrew-kail.html">Andrew Kail</a>
    </address>
  </footer><!-- /.post-info -->
  <div class="entry-content">
    <h1>Installing Salt</h1>
<p>Getting salt installed is pretty straightforward as an up to date version is installed in the repos.</p>
<div class="highlight"><pre><span></span>sudo apt-get install salt-minion salt-master
</pre></div>


<p>Add the hostname 'salt' to the <code>hosts</code> file so that it points to the salt-master.</p>
<div class="highlight"><pre><span></span>echo &quot;192.168.1.100 salt&quot; &gt;&gt; /etc/hosts
</pre></div>


<p>Restart the minion so that it connects to itself as the master</p>
<div class="highlight"><pre><span></span>service salt-minion restart
</pre></div>


<h1>Master Key</h1>
<p>list the keys
    salt-key -L</p>
<div class="highlight"><pre><span></span>salt-key -a pi-blue-01
salt-key -A
</pre></div>


<h1>SLS files</h1>
<p>Creating an sls files</p>
<p>Etc /etc/salt/master on the master</p>
<p>add /srv/salt as base directory</p>
<p>Create a basic top.sls
create vim.sls</p>
<div class="highlight"><pre><span></span>salt &#39;*&#39; state apply
</pre></div>


<h1>Basic Hardening</h1>
<p>Now any new pi's I add to my home network will automatically become hardened once they are connected to the master.</p>
<p>Setting up the SLS files.</p>
<h1>what to do to add nother node</h1>
  </div><!-- /.entry-content -->
  <div id="commentswrap">
      <div id="comments"></div>
  </div>
   <ul class="pager">
    </ul>
    <div class="row comments">
        <div id="disqus_thread"></div>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
</section>

                <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
         <script src="https://use.fontawesome.com/5ae78e6a14.js"></script>


         <script src="/theme/js/disqus.js"></script>
        </div>
        <div class="col-md-3">
            <div class="panel panel-default">
                <div class="panel-body">
                    <h3 style="margin-top: 0px;">Tags</h3>
                    <a href="/"><span class="label label-info">raspberry pi</span></a>
                    <a href="/"><span class="label label-info">saltstack</span></a>
                    <a href="/"><span class="label label-info">raspbian</span></a>
                    <a href="/"><span class="label label-info">linux</span></a>
                </div>
            </div>
        </div>
    </div>

                <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
         <script src="https://use.fontawesome.com/5ae78e6a14.js"></script>


         <script src="/theme/js/disqus.js"></script>

    <footer class="footer">
      <div class="container">
        <p class="text-muted">Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
        which takes great advantage of <a href="http://python.org">Python</a>.
        </p>
      </div>
    </footer>
</body>
</html>